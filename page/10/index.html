<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/10/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/21/yuque/Git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/21/yuque/Git/" class="post-title-link" itemprop="url">Git</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-21 17:58:56" itemprop="dateCreated datePublished" datetime="2020-09-21T17:58:56+08:00">2020-09-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:04" itemprop="dateModified" datetime="2023-02-07T21:32:04+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-指令"><a href="#1-指令" class="headerlink" title="1 指令"></a>1 指令</h1><p>–创建分支<br>git branch <name><br>–将 master 分支强制指向 HEAD 的第 3 级父提交。<br>git branch -f master HEAD<del>3<br>–切换到新的分支上<br>git checkout &lt;name/hash 值&gt;;<br>–在<name>分支上提交修改<br>git checkout <name>; –切换到 name 分支上<br>git commit;<br>–合并 name 分支至当前分支<br>git merge <name>;<br>–把当前分支 rebase 至 name 分支<br>git rebase <name>  <br>HEAD-指向你正在其基础上进行工作的提交记录<br>–查看提交记录的哈希值（基于 SHA-1）。<br>git log<br>–相对引用<br>使用 ^ 向上移动 1 个提交记录<br>使用 ~<num> 向上移动多个提交记录，如 ~3<br>ps: git checkout HEAD^^ == git checkout HEAD</del>4<br>–撤销变更<br>git reset C1 –撤回至 C1，在 reset 后， C2 所做的变更还在，但是处于未加入暂存区状态<br>git revert HEAD –提交新的记录，与 HEAD 的前一次记录相同</p>
<h1 id="2-版本管理实践"><a href="#2-版本管理实践" class="headerlink" title="2 版本管理实践"></a>2 版本管理实践</h1><ul>
<li><strong>FeatureXXX：</strong><ul>
<li>具体功能开发分支，从 develop 分支拉，功能开发自测完后合并到 develop 分支。来不及上线的 feature 分支不要合并到 develop。</li>
</ul>
</li>
<li><strong>develop 开发分支：</strong><ul>
<li>上面代码都是已经开发完的代码（包括已上线和正在测试的）。</li>
</ul>
</li>
<li><strong>Release 分支：</strong><ul>
<li>测试分支，从 develop 上 fork 进行测试，测试发现问题就在 release 分支上修改，测试通过 release 代码合并到 master 分支发布和 develop 分支（如果有修改）。</li>
</ul>
</li>
<li><strong>master 分支：</strong><ul>
<li>发布分支，任何时候 master 上代码都是能上线的，可以打 tag。</li>
</ul>
</li>
<li><strong>fix 分支：</strong><ul>
<li>当上线后发现 bug，在 master 上开一个 fix 分支进行修正，修正完后合并到 master 进行发布，同时 fix 也要合并到 develop，（看情况决定是否合并到当前正在测试的 release 分支）。</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/19/yuque/JWT/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/19/yuque/JWT/" class="post-title-link" itemprop="url">JWT</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-19 02:02:00" itemprop="dateCreated datePublished" datetime="2020-09-19T02:02:00+08:00">2020-09-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:06" itemprop="dateModified" datetime="2023-02-07T21:32:06+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>JSON Web Token（缩写 JWT）是目前最流行的跨域认证解决方案</p>
<ul>
<li>认证：用户认证就是判断一个用户的身份是否合法的过程</li>
<li>授权：控制用户访问资源</li>
</ul>
<h1 id="1-数据结构"><a href="#1-数据结构" class="headerlink" title="1 数据结构"></a>1 数据结构</h1><ul>
<li>Base64UrlEncode[<strong>header</strong>]**.<strong>Base64UrlEncode[<strong>payload</strong>]</strong>.**Base64UrlEncode[<strong>signature</strong>]</li>
<li>decode 后结构：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Fud2pnBR6oIos9Mr54YHZgk_Zgg-.png"></p>
<h2 id="1-1-头部（header"><a href="#1-1-头部（header" class="headerlink" title="1.1 头部（header)"></a>1.1 头部（header)</h2><p>是一个 JSON 对象</p>
<ul>
<li>声明类型，这里是 jwt</li>
<li>声明加密的算法：<ul>
<li>RS256。非对称算法，易于使用方获取和使用公钥</li>
<li>HS256。对称算法，必须注意确保密钥不被泄密</li>
</ul>
</li>
</ul>
<hr>
<h2 id="1-2-载荷（payload"><a href="#1-2-载荷（payload" class="headerlink" title="1.2 载荷（payload)"></a>1.2 载荷（payload)</h2><p>Payload 部分也是一个 JSON 对象，用来存放实际需要传递的数据</p>
<ul>
<li>JWT 规定了 7 个官方字段，供选用。<ul>
<li>iss (issuer)：签发人</li>
<li>exp (expiration time)：过期时间</li>
<li>sub (subject)：主题</li>
<li>aud (audience)：受众</li>
<li>nbf (Not Before)：生效时间</li>
<li>iat (Issued At)：签发时间</li>
<li>jti (JWT ID)：编号</li>
</ul>
</li>
<li>自定义信息<ul>
<li>通过 TokenEnhance 实现</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>首先实现TokenEnhancer接口</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IatTokenEnhancer</span> <span class="keyword">implements</span> <span class="title class_">TokenEnhancer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> OAuth2AccessToken <span class="title function_">enhance</span><span class="params">(OAuth2AccessToken accessToken, OAuth2Authentication authentication)</span> &#123;</span><br><span class="line">        addClaims((DefaultOAuth2AccessToken) accessToken);</span><br><span class="line">        <span class="keyword">return</span> accessToken;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addClaims</span><span class="params">(DefaultOAuth2AccessToken accessToken)</span> &#123;</span><br><span class="line">        <span class="type">DefaultOAuth2AccessToken</span> <span class="variable">token</span> <span class="operator">=</span> accessToken;</span><br><span class="line">        Map&lt;String, Object&gt; additionalInformation = token.getAdditionalInformation();</span><br><span class="line">        <span class="keyword">if</span> (additionalInformation.isEmpty()) &#123;</span><br><span class="line">            additionalInformation = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;String, Object&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//添加自定义信息-------------------------</span></span><br><span class="line">        additionalInformation.put(<span class="string">&quot;iat&quot;</span>, <span class="keyword">new</span> <span class="title class_">Integer</span>((<span class="type">int</span>)(System.currentTimeMillis()/<span class="number">1000L</span>)));</span><br><span class="line">        additionalInformation.put(<span class="string">&quot;test&quot;</span>,<span class="string">&quot;myTest&quot;</span>);</span><br><span class="line">        token.setAdditionalInformation(additionalInformation);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>配置Enhancer至令牌增强器</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(AuthorizationServerEndpointsConfigurer endpoints)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//pick up all  TokenEnhancers incl. those defined in the application</span></span><br><span class="line">        <span class="comment">//this avoids changes to this class if an application wants to add its own to the chain</span></span><br><span class="line">        Collection&lt;TokenEnhancer&gt; tokenEnhancers =</span><br><span class="line">            applicationContext.getBeansOfType(TokenEnhancer.class).values();</span><br><span class="line">        <span class="type">TokenEnhancerChain</span> <span class="variable">tokenEnhancerChain</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TokenEnhancerChain</span>();</span><br><span class="line">        tokenEnhancerChain.setTokenEnhancers(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(tokenEnhancers));</span><br><span class="line">        endpoints</span><br><span class="line">            .authenticationManager(authenticationManager)</span><br><span class="line">            .tokenStore(tokenStore())</span><br><span class="line">            .tokenEnhancer(tokenEnhancerChain)</span><br><span class="line">            .reuseRefreshTokens(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><hr>
<h2 id="1-3-签名（signature"><a href="#1-3-签名（signature" class="headerlink" title="1.3 签名（signature)"></a>1.3 签名（signature)</h2><p>Signature 部分是对前两部分的签名，防止数据篡改。<br>使用 secret，对编码后的 header 和 payload 通过 header 中指定签名算法做数字签名，公式如下：<br><code>header中指定签名算法( ``**base64UrlEncode(header)+&quot;.&quot;+base64UrlEncode(payload)**</code> <code>,``**secret**``)</code></p>
<ul>
<li>算法<ul>
<li>HS256<ul>
<li>先做摘要 再用 MAC 对称加密算法加密</li>
</ul>
</li>
<li>RS256<ul>
<li>先做摘要 再用 RSA 非对称加密算法加密</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/18/yuque/Kafka/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/18/yuque/Kafka/" class="post-title-link" itemprop="url">Kafka</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-18 16:22:46" itemprop="dateCreated datePublished" datetime="2020-09-18T16:22:46+08:00">2020-09-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:17" itemprop="dateModified" datetime="2023-02-07T21:32:17+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-构成"><a href="#1-构成" class="headerlink" title="1 构成"></a>1 构成</h1><ul>
<li>Broker：一台 Kafka 服务器</li>
<li>topic：即队列</li>
<li>Partition：topic 的分区，一个 topic 会分为多个 Partition，每个 Partition 负责存储这个 Topic 一部分的数据。<ul>
<li>主分区：若某个 Broker 挂了，会选举出其他 Broker 的备份分区做主分区。实现<strong>高可用</strong></li>
<li>备份分区：只做备份，不做读写。</li>
</ul>
</li>
<li>集群的 metadata（kafka 集群的每一台 broker 都缓存了整个集群的 metadata, 当 broker 或某一个 topic 的 metadata 信息发生变化时, 集群的<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a9f559ee6035">Controller</a>                              都会感知到作相应的状态转换, 同时把发生变化的新的 metadata 信息广播到所有的 broker;）<ul>
<li>所有 broker 信息（包括 ip，port）</li>
<li>所有 topic 的信息: topic name, partition 数量, 每个 partition 的 leader, isr, replica 集合等</li>
</ul>
</li>
</ul>
<h1 id=""><a href="#" class="headerlink" title=""></a><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Foc4FYlkhlLJH6kqQDn8lQj0inP0.png"></h1><hr>
<ul>
<li>offset<ul>
<li>0.9 版本之前保存在 zookeeper<ul>
<li>消费者需频繁从 zookeeper 拉取 offset</li>
</ul>
</li>
<li>0.9 版本之后保存在 kafka 本地的某一个 topic</li>
</ul>
</li>
</ul>
<h1 id="2-特点"><a href="#2-特点" class="headerlink" title="2 特点"></a>2 特点</h1><h2 id="2-1-At-least-once"><a href="#2-1-At-least-once" class="headerlink" title="2.1 At least once"></a>2.1 At least once</h2><p>Kafka 采用的是至少一次（At least once）</p>
<ul>
<li><strong>消息不会丢</strong></li>
<li><strong>但是可能会重复消费</strong><ul>
<li>生产者角度：<ul>
<li>消息发到 broker，broker 写入消息，broker 返回响应。若返回的响应（可能因为网络原因）生产者没有收到，然后生产者又重发了一次</li>
</ul>
</li>
<li>消费者角度：<ul>
<li>消费者拿到消息消费完成，更新 consumer offset。若更新 offset 前消费者额挂了，其他消费者又消费了这条消息</li>
</ul>
</li>
</ul>
</li>
<li>幂等处理重复消费</li>
</ul>
<h2 id="2-2-acks-机制：确保消息写入成功"><a href="#2-2-acks-机制：确保消息写入成功" class="headerlink" title="2.2 acks 机制：确保消息写入成功"></a>2.2 acks 机制：确保消息写入成功</h2><p>生产者中设置：</p>
<ul>
<li>**acks=0   **<ul>
<li>消息发出后就不管了</li>
</ul>
</li>
<li>**acks=1（默认） **<ul>
<li>只要 Partition Leader 接收到消息而且写入本地磁盘了，就认为成功了</li>
</ul>
</li>
<li>**acks=all  **<ul>
<li>Partition Leader 接收到消息之后，还必须要求 ISR 列表里跟 Leader 保持同步的那些 Follower 都要把消息同步过去，才能认为这条消息是写入成功了</li>
<li>当 partition 中只有一个 leader 时，acks=all 也会丢失消息</li>
</ul>
</li>
</ul>
<h2 id="2-3-多副本冗余的机制"><a href="#2-3-多副本冗余的机制" class="headerlink" title="2.3 多副本冗余的机制"></a>2.3 多副本冗余的机制</h2><pre><code>我们数据存在不同的partition上，那kafka就把这些partition做备份。比如，现在我们有三个partition，分别存在三台broker上。每个partition都会备份，这些备份散落在不同的broker上。
</code></pre>
<h2 id="2-4-多副本数据同步"><a href="#2-4-多副本数据同步" class="headerlink" title="2.4 多副本数据同步"></a>2.4 多副本数据同步</h2><p>只有 Partition Leader 是对外提供读写服务的,也就是说，如果有一个客户端往一个 Partition 写入数据，此时一般就是写入这个 Partition 的 Leader 副本。<br>然后 Leader 副本接收到数据之后，Follower 副本会不停的给他发送请求尝试去拉取最新的数据，拉取到自己本地后，写入磁盘中。</p>
<h2 id="2-5-快"><a href="#2-5-快" class="headerlink" title="2.5 快"></a>2.5 快</h2><ul>
<li><strong>顺序读写：</strong>Kafka 采取顺序写入磁盘的方式，避免了随机磁盘寻址的浪费</li>
<li><strong>零拷贝：</strong>减少内核之间的切换<ul>
<li><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FqVtxs0MQ6Ax9ChbsghT3fsto2te.png"></li>
</ul>
</li>
<li><strong>消息压缩</strong></li>
<li><strong>分批发送：</strong>Kafka 可以将数据记录分批发送，从生产者到文件系统（Kafka 主题日志）到消费者，可以端到端的查看这些批次的数据。</li>
</ul>
<h2 id="2-6-持久化"><a href="#2-6-持久化" class="headerlink" title="2.6 持久化"></a>2.6 持久化</h2><ul>
<li>Kafka 是将 partition 的数据写在<strong>磁盘的消息日志</strong>，不是 partition 一有数据就立马将数据写到磁盘上，它会先缓存一部分，等到足够多数据量或等待一定的时间再批量写入(<strong>flush</strong>)</li>
<li>Kafka 只允许<strong>追加写入</strong>(顺序访问)，避免缓慢的随机 I/O 操作。</li>
</ul>
<h2 id="2-7-全局有序（特定条件）-分区有序"><a href="#2-7-全局有序（特定条件）-分区有序" class="headerlink" title="2.7 全局有序（特定条件）/分区有序"></a>2.7 全局有序（特定条件）/分区有序</h2><ul>
<li>全局有序(需特定条件)<ul>
<li>特定条件：topic 中只有一个 partition（队列）</li>
</ul>
</li>
<li>分区有序<ul>
<li>在 topic 中有多个 partition 的时候，只能保证 partition 有序</li>
</ul>
</li>
</ul>
<hr>
<h1 id="3-消息堆积问题"><a href="#3-消息堆积问题" class="headerlink" title="3 消息堆积问题"></a>3 消息堆积问题</h1><ul>
<li>原因<ul>
<li><strong>生产者的生产速度与消费者的消费速度不匹配</strong></li>
</ul>
</li>
<li>解决方案<ul>
<li>优化代码逻辑<ul>
<li>一条一条消费改为批量消费（如：数据库插入操作）</li>
</ul>
</li>
<li>水平扩容<ul>
<li>同时增加 Topic 的 partitions 和 consumer</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h1 id="4-场景"><a href="#4-场景" class="headerlink" title="4 场景"></a>4 场景</h1><ul>
<li>追求<strong>高吞吐量</strong></li>
<li>对消息的重复没有严格要求</li>
<li>适合产生<strong>大量数据</strong>的互联网服务的数据收集业务（如日志采集）</li>
</ul>
<hr>
<h1 id="5-配置"><a href="#5-配置" class="headerlink" title="5 配置"></a>5 配置</h1><h2 id="5-1-kafka-服务端配置"><a href="#5-1-kafka-服务端配置" class="headerlink" title="5.1 kafka 服务端配置"></a>5.1 kafka 服务端配置</h2><ul>
<li>server.properties：</li>
</ul>
<p>#The id of the broker. This must be set to a unique integer for each broker.</p>
<ul>
<li>broker.id=0</li>
</ul>
<h1 id="A-comma-separated-list-of-directories-under-which-to-store-log-files（运行数据-日志存放路径）"><a href="#A-comma-separated-list-of-directories-under-which-to-store-log-files（运行数据-日志存放路径）" class="headerlink" title="A comma separated list of directories under which to store log files（运行数据/日志存放路径）"></a>A comma separated list of directories under which to store log files（运行数据/日志存放路径）</h1><ul>
<li>log.dirs=/usr/local/var/lib/kafka-logs</li>
</ul>
<h1 id="The-minimum-age-of-a-log-file-to-be-eligible-for-deletion-due-to-age"><a href="#The-minimum-age-of-a-log-file-to-be-eligible-for-deletion-due-to-age" class="headerlink" title="The minimum age of a log file to be eligible for deletion due to age"></a>The minimum age of a log file to be eligible for deletion due to age</h1><ul>
<li>log.retention.hours=168</li>
</ul>
<h2 id="5-2-kafka-客户端配置"><a href="#5-2-kafka-客户端配置" class="headerlink" title="5.2 kafka 客户端配置"></a>5.2 kafka 客户端配置</h2><ul>
<li>拉取时设置的 timeout<ul>
<li><strong>_@param _</strong><em>timeout The maximum time to block</em></li>
<li><em>拉取消息时等待的最长时间，若到最长时间还没有消息，就直接返回 空</em></li>
<li>public ConsumerRecords&lt;K, V&gt; poll(final Duration timeout)</li>
</ul>
</li>
<li>max.poll.interval.ms: 600000<ul>
<li>最大拉取间隔时间，若超过，则客户端会主动离开 group</li>
<li>避免“活锁”的情况：客户端持续的发送心跳，但是没有拉取消息处理。为了预防消费者在这种情况下一直持有分 区，我们使用 max.poll.interval.ms 活跃检测机制。</li>
</ul>
</li>
<li>heartbeat.interval.ms<ul>
<li>间隔多久发送一次心跳</li>
<li>默认 3s</li>
</ul>
</li>
<li>session.timeout.ms<ul>
<li>group coordinator 多久没收到心跳 就 rebalance</li>
<li>默认 10s</li>
</ul>
</li>
</ul>
<p> </p>
<hr>
<h1 id="6-Java-API"><a href="#6-Java-API" class="headerlink" title="6 Java API"></a>6 Java API</h1><h2 id="6-1-Producer-端消息发送的基本流程"><a href="#6-1-Producer-端消息发送的基本流程" class="headerlink" title="6.1 Producer 端消息发送的基本流程"></a>6.1 Producer 端消息发送的基本流程</h2><p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Fjfc3k3xel-XF-jcQ0yChvS2n9mg.png"></p>
<h3 id="6-1-1-序列化器"><a href="#6-1-1-序列化器" class="headerlink" title="6.1.1 序列化器"></a>6.1.1 序列化器</h3><h3 id="6-1-2-分区器"><a href="#6-1-2-分区器" class="headerlink" title="6.1.2 分区器"></a>6.1.2 分区器</h3><hr>
<h2 id="6-2-kafkaConsumer–assign-与-subscribe"><a href="#6-2-kafkaConsumer–assign-与-subscribe" class="headerlink" title="6.2 kafkaConsumer–assign 与 subscribe"></a>6.2 kafkaConsumer–assign 与 subscribe</h2><blockquote>
<p>一般场景建议使用 subscribe（） 函数来实现 partition 的分配。</p>
</blockquote>
<ul>
<li>assign(Collection partitions)<ul>
<li>为 consumer 手动、显示的指定需要消费的 topic-partitions，不受 group.id 限制，相当与指定的 group 无效（this method does not use the consumer’s group management）</li>
</ul>
</li>
<li>subscribe(Collection<String> topics)<ul>
<li>为 consumer 自动分配 partition，有内部算法保证 topic-partition 以最优的方式均匀分配给同 group 下的不同 consumer。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="6-3-Kafka-Producer-send-阻塞"><a href="#6-3-Kafka-Producer-send-阻塞" class="headerlink" title="6.3 Kafka Producer send 阻塞"></a>6.3 Kafka Producer send 阻塞</h2><p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/objcoding/articles/13662337.html">https://www.cnblogs.com/objcoding/articles/13662337.html</a></p>
<h3 id="6-3-1-场景-1–Producer-获取不到-metadata-信息："><a href="#6-3-1-场景-1–Producer-获取不到-metadata-信息：" class="headerlink" title="6.3.1 场景 1–Producer 获取不到 metadata 信息："></a>6.3.1 场景 1–Producer 获取不到 metadata 信息：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2021-06-15 00:00:01,141 WARN  [kafka-producer-network-thread | producer-1] NetworkClient: [Producer clientId=producer-1] Error while fetching metadata with correlation id 48587 : &#123;mainfab_offline_indicator_config_topic=UNKNOWN_TOPIC_OR_PARTITION&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Flt0YB2XiXWqud9exw0mxrljs3Tj.png"></p>
<h3 id="6-3-2-场景-2–缓冲池内存用完"><a href="#6-3-2-场景-2–缓冲池内存用完" class="headerlink" title="6.3.2 场景 2–缓冲池内存用完"></a>6.3.2 场景 2–缓冲池内存用完</h3><blockquote>
<p>RecordAccumulator（Kafka Producer 缓冲池核心类）中注释：<br>The accumulator uses a bounded amount of memory and append calls will block when that memory is exhausted, unless this behavior is explicitly disabled.<br>当缓冲池的内存块用完后，消息追加调用将会被阻塞，直到有空闲的内存块。</p>
</blockquote>
<ul>
<li>在新版的 Kafka Producer 中，设计了一个消息缓冲池，客户端发送的消息都会被存储到缓冲池中，同时 Producer 启动后还会开启一个 Sender 线程，不断地从缓冲池获取消息并将其发送到 Broker</li>
<li>缓冲池大小设置：buffer.memory</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FiKrXCEUWgm1s5ZNS8W_PtFVqgKj.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/16/yuque/JPA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/16/yuque/JPA/" class="post-title-link" itemprop="url">JPA</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-16 17:27:49" itemprop="dateCreated datePublished" datetime="2020-09-16T17:27:49+08:00">2020-09-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:19" itemprop="dateModified" datetime="2023-02-07T21:32:19+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h1><h2 id="1-1-Hibernate，JPA，Spring-Data-JPA-关系"><a href="#1-1-Hibernate，JPA，Spring-Data-JPA-关系" class="headerlink" title="1.1 Hibernate，JPA，Spring Data JPA 关系"></a>1.1 <strong>Hibernate，JPA，Spring Data JPA 关系</strong></h2><ul>
<li>JPA 是一套<strong>规范</strong>，内部是由接口和抽象类组成的。</li>
<li>hibernate 是一套 ORM 框架，而且 Hibernate<strong>实现了 JPA 规范</strong>，所以也可以称 hibernate 为 JPA 的一种实现方式</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Fsb2t9Ku5ZqMhqWkD7prfpvWcXUW.png"></p>
<ul>
<li>Spring Data JPA 是 Spring 提供的一套对 JPA 操作更加高级的封装（编写规范）。Spring Data JPA 和 JPA 一样，虽然定义了持久层的编写规范，但是持久层的具体操作需要由第三方框架来做，它自己并不能做相应的 CRUD 操作。</li>
</ul>
<h1 id="2-使用"><a href="#2-使用" class="headerlink" title="2 使用"></a>2 使用</h1><h2 id="2-1-引入依赖"><a href="#2-1-引入依赖" class="headerlink" title="2.1 引入依赖"></a>2.1 引入依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">project.hibernate.version</span>&gt;</span>5.0.7.Final<span class="tag">&lt;/<span class="name">project.hibernate.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- junit --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- hibernate对jpa的支持包 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-entitymanager<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.hibernate.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- c3p0数据库连接池 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.hibernate.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- log日志 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- Mysql and MariaDB --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="3-JPA-实现-Hibenate"><a href="#3-JPA-实现-Hibenate" class="headerlink" title="3 JPA 实现-Hibenate"></a>3 JPA 实现-Hibenate</h1><h2 id="3-1-Hibernate-缓存机制"><a href="#3-1-Hibernate-缓存机制" class="headerlink" title="3.1 Hibernate 缓存机制"></a>3.1 Hibernate 缓存机制</h2><h3 id="3-1-1-一级缓存"><a href="#3-1-1-一级缓存" class="headerlink" title="3.1.1 一级缓存"></a>3.1.1 一级缓存</h3><h3 id="3-1-2-二级缓存"><a href="#3-1-2-二级缓存" class="headerlink" title="3.1.2 二级缓存"></a>3.1.2 二级缓存</h3><hr>
<h1 id="主键生成策略"><a href="#主键生成策略" class="headerlink" title="主键生成策略"></a>主键生成策略</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>strategy</strong><ul>
<li>**IDENTITY: **主键由数据库自动生成（主要是自动增长型）（Mysql 支持）</li>
<li><strong>SEQUENCE：</strong>根据底层数据库的序列来生成主键，条件是数据库支持序列。（oracle 支持）</li>
<li>AUTO<strong>：</strong>主键由程序控制</li>
<li>TABLE<strong>：</strong>使用一个特定的数据库表格来保存主键</li>
</ul>
</li>
</ul>
<hr>
<h1 id="延迟加载"><a href="#延迟加载" class="headerlink" title="延迟加载"></a>延迟加载</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/16/yuque/Java8%E6%96%B0%E7%89%B9%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/16/yuque/Java8%E6%96%B0%E7%89%B9%E6%80%A7/" class="post-title-link" itemprop="url">Java8新特性</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-16 14:18:59" itemprop="dateCreated datePublished" datetime="2020-09-16T14:18:59+08:00">2020-09-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:29" itemprop="dateModified" datetime="2023-02-07T21:32:29+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-接口的默认方法"><a href="#1-接口的默认方法" class="headerlink" title="1 接口的默认方法"></a>1 接口的默认方法</h1><h1 id="2-Lambda-表达式"><a href="#2-Lambda-表达式" class="headerlink" title="2 Lambda 表达式"></a>2 Lambda 表达式</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匿名内部类方式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(List list)</span>&#123;</span><br><span class="line">    Collections.sort(list, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//lambda表达式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lambdaSort00</span><span class="params">(List&lt;String&gt; list)</span>&#123;</span><br><span class="line">    Collections.sort(list, (String x,String y) -&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> x.compareTo(y);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数体只有一行代码时，你可以去掉大括号以及return关键字</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lambdaSort01</span><span class="params">(List&lt;String&gt; list)</span>&#123;</span><br><span class="line">    Collections.sort(list, (String x,String y) -&gt; x.compareTo(y));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译器可以自动推导出参数类型，所以你可以不用再写一次类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lambdaSort02</span><span class="params">(List&lt;String&gt; list)</span>&#123;</span><br><span class="line">    Collections.sort(list, (x,y) -&gt; x.compareTo(y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="3-函数式接口"><a href="#3-函数式接口" class="headerlink" title="3 函数式接口"></a>3 函数式接口</h1><ul>
<li>函数式接口(Functional Interface)就是一个<strong>有且仅有一个抽象方法</strong>，但是可以有多个非抽象方法的接口。</li>
<li>可以使用 Lambda 表达式来表示<strong>该接口的一个实现。</strong></li>
<li>接口添加** @FunctionalInterface** 注解，编译器如果发现标注了这个注解的接口有多于一个抽象方法的时候会报错</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FsZ8jRvZ0p7yR76lIdc89H0owgBf.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JAVA 8 之前一般是用匿名类实现的</span></span><br><span class="line"><span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以使用Lambda表达式来表示该接口的一个实现</span></span><br><span class="line"><span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> () -&gt; System.out.println(<span class="string">&quot;test&quot;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="4-方法引用"><a href="#4-方法引用" class="headerlink" title="4 方法引用"></a>4 方法引用</h1><ul>
<li>根据<strong>已有的</strong>方法实现来创建 Lambda 表达式</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Lambda表达式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lambdaSort02</span><span class="params">(List&lt;String&gt; list)</span>&#123;</span><br><span class="line">    Collections.sort(list, (x,y)-&gt;x.compareTo(y));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//引用 类静态方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lambdaSort03</span><span class="params">(List&lt;String&gt; list)</span>&#123;</span><br><span class="line">    Collections.sort(list, MyCompareTest::myStaticCompare);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//引用 实例方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lambdaSort04</span><span class="params">(List&lt;String&gt; list)</span>&#123;</span><br><span class="line">    Collections.sort(list, <span class="keyword">new</span> <span class="title class_">MyCompareTest</span>()::myCompare);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: wqc</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2020-09-16 15:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCompareTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">myCompare</span><span class="params">(String s1, String s2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> s1.compareTo(s2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">myStaticCompare</span> <span class="params">(String s1, String s2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> s1.compareTo(s2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-Stream"><a href="#5-Stream" class="headerlink" title="5 Stream"></a>5 Stream</h1><ul>
<li>Java 8 新增的 Stream 是为了方便操作集合（<strong>Collection</strong>）。</li>
<li>每次操作流都会返回一个新的流对象，方便进行链式操作，但<strong>原有的流对象会保持不变</strong>。</li>
</ul>
<h2 id="5-1-创建流"><a href="#5-1-创建流" class="headerlink" title="5.1 创建流"></a>5.1 创建流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组创建流（方式一）</span></span><br><span class="line">String[] arr = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>&#125;;</span><br><span class="line">Stream&lt;String&gt; stream = Arrays.stream(arr);</span><br><span class="line"><span class="comment">//数组创建流（方式二）</span></span><br><span class="line">stream = Stream.of(<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>);</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>);</span><br><span class="line"><span class="comment">//集合创建流</span></span><br><span class="line">stream = list.stream();</span><br><span class="line"><span class="comment">//集合创建并发流</span></span><br><span class="line">stream = list.parallelStream();</span><br></pre></td></tr></table></figure>

<h2 id="5-2-操作流"><a href="#5-2-操作流" class="headerlink" title="5.2 操作流"></a>5.2 操作流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>, <span class="string">&quot;DD&quot;</span>);</span><br><span class="line">Stream&lt;String&gt; stream = list.stream();</span><br><span class="line"><span class="comment">//过滤 输出：AAA</span></span><br><span class="line">list.stream().filter(elem -&gt; elem.contains(<span class="string">&quot;A&quot;</span>)).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//映射 输出：3 3 3 2</span></span><br><span class="line">list.stream().map(<span class="keyword">for</span>).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配</span></span><br><span class="line">list.stream().anyMatch(element -&gt; element.contains(<span class="string">&quot;A&quot;</span>));</span><br><span class="line">list.stream().allMatch(element -&gt; element.length() &gt; <span class="number">1</span>);</span><br><span class="line">list.stream().noneMatch(element -&gt; element.endsWith(<span class="string">&quot;X&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//组合</span></span><br><span class="line">Optional&lt;String&gt; optional = list.stream().reduce((a, b) -&gt; a + b);</span><br><span class="line">System.out.println(optional.orElse(<span class="string">&quot;null&quot;</span>));</span><br><span class="line"><span class="comment">//&quot;test&quot;为起始值</span></span><br><span class="line">System.out.println(list.stream().reduce(<span class="string">&quot;test&quot;</span>, (a, b) -&gt; a + b));</span><br><span class="line"></span><br><span class="line"><span class="comment">//去重</span></span><br><span class="line">list.stream().distinct().forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除 输出：DD</span></span><br><span class="line">list.stream().skip(<span class="number">3</span>).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//求最小值 输出：Optional[AAA]</span></span><br><span class="line">list.stream().min(String::compareTo);</span><br></pre></td></tr></table></figure>

<h3 id="5-2-1-中间操作之-map-与-flatMap"><a href="#5-2-1-中间操作之-map-与-flatMap" class="headerlink" title="5.2.1 中间操作之 map 与 flatMap"></a>5.2.1 中间操作之 map 与 flatMap</h3><ul>
<li>map</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String[] words = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;Hello&quot;</span>,<span class="string">&quot;World&quot;</span>&#125;;</span><br><span class="line">List&lt;String[]&gt; a = Arrays.stream(words)</span><br><span class="line">    .map(word -&gt; word.split(<span class="string">&quot;&quot;</span>))</span><br><span class="line">    .distinct()</span><br><span class="line">    .collect(toList());</span><br><span class="line">a.forEach(System.out::print);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Fo6U7gmF-YArcyUvG8UbySUGq4S0.png"></p>
<ul>
<li>flatMap(对流扁平化处理)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String[] words = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;Hello&quot;</span>,<span class="string">&quot;World&quot;</span>&#125;;</span><br><span class="line">List&lt;String&gt; a = Arrays.stream(words)</span><br><span class="line">    .map(word -&gt; word.split(<span class="string">&quot;&quot;</span>))</span><br><span class="line">    .flatMap(Arrays::stream)</span><br><span class="line">    .distinct()</span><br><span class="line">    .collect(toList());</span><br><span class="line">a.forEach(System.out::print);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Fo1t0Yi-LEUwu3A3Xmh8JL8tj9g4.png"></p>
<h2 id="5-3-terminal-operation"><a href="#5-3-terminal-operation" class="headerlink" title="5.3 terminal operation"></a>5.3 terminal operation</h2><p>Collectors 就是一个 collector 工厂，原理如下图：<br><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FpXafat2yx1Ch5zSgj12bBQNFbe0.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//流转化为List</span></span><br><span class="line">list.stream().collect(Collectors.toList());</span><br><span class="line">list.stream().collect(Collectors.toCollection(ArrayList::<span class="keyword">new</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 流转化为Map</span></span><br><span class="line">list.stream().collect(Collectors.toMap(DTO::getId,</span><br><span class="line">                                       Function.identity(),</span><br><span class="line">                                       (newData, oldData) -&gt; newData));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去重1</span></span><br><span class="line">list.stream()</span><br><span class="line">    .collect(Collectors.collectingAndThen(Collectors.toCollection(() -&gt; <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(Comparator.comparing(dto::getName))), ArrayList::<span class="keyword">new</span>));</span><br><span class="line"><span class="comment">// 去重2</span></span><br><span class="line">list.stream()</span><br><span class="line">    .collect(Collectors.groupingBy(dto::getName));</span><br></pre></td></tr></table></figure>

<h1 id="6-新增的接口-类"><a href="#6-新增的接口-类" class="headerlink" title="6 新增的接口/类"></a>6 新增的接口/类</h1><h2 id="6-1-函数式接口"><a href="#6-1-函数式接口" class="headerlink" title="6.1 函数式接口"></a>6.1 <strong>函数式接口</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// x -&gt; y</span></span><br><span class="line">Function&lt;Integer, Integer&gt; function = x -&gt; x + <span class="number">5</span>;</span><br><span class="line">System.out.println(function.apply(<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// () -&gt; y</span></span><br><span class="line">Supplier&lt;Integer&gt; supplier = () -&gt; <span class="number">5</span>;</span><br><span class="line">System.out.println(supplier.get());</span><br><span class="line"></span><br><span class="line"><span class="comment">// x -&gt; ()</span></span><br><span class="line">Consumer&lt;Integer&gt; consumer = System.out::println;</span><br><span class="line">consumer.accept(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// (x, y) -&gt; ()</span></span><br><span class="line">BiConsumer&lt;Integer, Integer&gt; biConsumer = (x, y) -&gt; System.out.println(x + y);</span><br><span class="line">biConsumer.accept(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// x -&gt; Boolean</span></span><br><span class="line">Predicate&lt;Integer&gt; predicate = x -&gt; x &gt; <span class="number">5</span>;</span><br><span class="line">System.out.println(predicate.test(<span class="number">5</span>));</span><br></pre></td></tr></table></figure>

<h2 id="6-2-Optional-类"><a href="#6-2-Optional-类" class="headerlink" title="6.2 Optional 类"></a>6.2 <strong>Optional 类</strong></h2><ul>
<li>防止 NullPointerException</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/15/yuque/JHipster/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/15/yuque/JHipster/" class="post-title-link" itemprop="url">JHipster</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-15 14:44:57" itemprop="dateCreated datePublished" datetime="2020-09-15T14:44:57+08:00">2020-09-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:30" itemprop="dateModified" datetime="2023-02-07T21:32:30+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h1><ul>
<li>JHipster 或者称 Java Hipster，是一个应用代码产生器，能够创建 SpringBoot + AngularJS/React 的单体或分布式应用。</li>
<li>架构图：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FlPmOwGeNa_PdwivWrk11D4hPGkN.png"></p>
<h1 id="2-安装"><a href="#2-安装" class="headerlink" title="2 安装"></a>2 安装</h1><h2 id="2-1-安装-JDK"><a href="#2-1-安装-JDK" class="headerlink" title="2.1 安装 JDK"></a>2.1 安装 JDK</h2><p>官网推荐 jdk11，jdk1.8 也可</p>
<h2 id="2-2-安装-node-js（请使用-LTS-64-位版本-非-LTS-版本不再支持）"><a href="#2-2-安装-node-js（请使用-LTS-64-位版本-非-LTS-版本不再支持）" class="headerlink" title="2.2 安装 node.js（请使用 LTS 64 位版本, 非 LTS 版本不再支持）**"></a>2.2 安装 node.js（<strong>请使用 LTS 64 位版本, 非 LTS 版本不再支持</strong>）**</h2><p><strong>node：</strong>就是一个<strong>javascript 的运行环境（平台）</strong>，他不是一门语言，也不是 javascript 的框架。可以用来开发服务端应用程序，web 系统。其特点是体积小，快速，高性能。</p>
<ul>
<li>查看 node 版本：<ul>
<li><code>node -v</code></li>
</ul>
</li>
</ul>
<p><strong>npm：</strong>JavaScript 的包管理工具。类似 Java 中的 maven，gradle</p>
<ul>
<li>设置淘宝镜像<ul>
<li><code>npm config set registry </code><a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/"><code>https://registry.npm.taobao.org</code></a></li>
</ul>
</li>
<li>查看 npm 的配置信息<ul>
<li><code>npm config list</code></li>
</ul>
</li>
</ul>
<h2 id="2-3-安装-JHipster"><a href="#2-3-安装-JHipster" class="headerlink" title="2.3 安装 JHipster"></a>2.3 安装 JHipster</h2><ul>
<li><code>npm install -g generator-jhipster</code></li>
</ul>
<h1 id="3-创建应用程序"><a href="#3-创建应用程序" class="headerlink" title="3 创建应用程序"></a>3 创建应用程序</h1><ul>
<li>创建一个生产应用程序的空目录<ul>
<li><code>mkdir jhipstertest</code></li>
</ul>
</li>
<li>进入目录，生成应用程序<ul>
<li><code>cd C:\Will\Study\workspace\jhipstertest</code></li>
<li><code>jhipster</code></li>
</ul>
</li>
<li>启动<ul>
<li><code>./mvnw</code></li>
</ul>
</li>
</ul>
<h1 id="3-项目结构"><a href="#3-项目结构" class="headerlink" title="3 项目结构"></a>3 项目结构</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/11/yuque/linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/11/yuque/linux/" class="post-title-link" itemprop="url">Linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-11 10:30:38" itemprop="dateCreated datePublished" datetime="2020-09-11T10:30:38+08:00">2020-09-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:30" itemprop="dateModified" datetime="2023-02-07T21:32:30+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-指令"><a href="#1-指令" class="headerlink" title="1. 指令"></a>1. 指令</h1><h2 id="1-1-docker"><a href="#1-1-docker" class="headerlink" title="1.1 docker"></a>1.1 docker</h2><p>systemctl stop docker.service<br>systemctl start docker.service<br>systemctl restart docker.service<br>systemctl status docker.service</p>
<p>–拉取镜像<br>docker pull how2j/tmall</p>
<p>–运行镜像<br>docker run -dit –privileged -p21:21 -p80:80 -p8080:8080 -p30000-30010:30000-30010 –name how2jtmall how2j/tmall:latest /usr/sbin/init</p>
<p>–检查端口<br>netstat -anp|grep 8080</p>
<p>–访问<br><a target="_blank" rel="noopener" href="http://192.168.0.128:8080/tmall/">http://192.168.0.128:8080/tmall/</a></p>
<p>–进入容器<br>docker exec -it how2jtmall /bin/bash</p>
<p>–退出容器<br>exit</p>
<hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl set-default graphical.target  # 将默认模式修改为图形界面模式</span><br><span class="line">systemctl set-default multi-user.target # 将默认模式修改为命令行模式</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/08/yuque/MapStruct/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/08/yuque/MapStruct/" class="post-title-link" itemprop="url">MapStruct</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-08 14:32:37" itemprop="dateCreated datePublished" datetime="2020-09-08T14:32:37+08:00">2020-09-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:32" itemprop="dateModified" datetime="2023-02-07T21:32:32+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h1><ul>
<li><strong>官网</strong>：<a target="_blank" rel="noopener" href="https://mapstruct.org/">https://mapstruct.org/</a></li>
<li>MapStruct 是一个<strong>属性映射工具</strong>，只需要定义一个 Mapper 接口，MapStruct 就会自动实现这个映射接口，避免了复杂繁琐的映射实现</li>
<li>**@Mapper **注解的 **componentModel **属性用于指定自动生成的接口实现类的组件类型，支持四个值：<ul>
<li>**default: **默认的情况，mapstruct 不使用任何组件类型, 可以通过 Mappers.getMapper(Class)方式获取自动生成的实例对象。</li>
<li>**cdi: **the generated mapper is an application-scoped CDI bean and can be retrieved via @Inject</li>
<li><strong>spring:</strong> 生成的实现类上会自动添加@Component，可以通过 Spring 的@Autowired 方式注入</li>
<li>**jsr330: **生成的实现类上会添加@javax.inject.Named 和@Singleton 注解，可以通过 @Inject 注解获取</li>
</ul>
</li>
</ul>
<h1 id="2-应用"><a href="#2-应用" class="headerlink" title="2 应用"></a>2 应用</h1><h2 id="2-1-引入依赖："><a href="#2-1-引入依赖：" class="headerlink" title="2.1 引入依赖："></a>2.1 引入依赖：</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapstruct.version</span>&gt;</span>1.2.0.Final<span class="tag">&lt;/<span class="name">mapstruct.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  	<span class="comment">&lt;!-- 包含了一些必要的注解，例如@Mapping。若我们使用的JDK版本高于1.8，当我们在pom里面导入依赖时候，</span></span><br><span class="line"><span class="comment">		建议使用坐标是：org.mapstruct:mapstruct-jdk8，这可以帮助我们利用一些Java8的新特性。 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mapstruct<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct-jdk8<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mapstruct.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  	<span class="comment">&lt;!-- 注解处理器，根据注解自动生成mapper的实现。--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mapstruct<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mapstruct.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-定义接口"><a href="#2-2-定义接口" class="headerlink" title="2.2 定义接口"></a>2.2 定义接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.mapstruct.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper(componentModel = &quot;spring&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AgrSceneGroupTempRelMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">   	<span class="comment">//定义DTO与entity之间字段关系</span></span><br><span class="line">	<span class="meta">@Mappings(&#123;</span></span><br><span class="line"><span class="meta">    	@Mapping(source = &quot;townName&quot;, target = &quot;regionName&quot;),</span></span><br><span class="line"><span class="meta">        @Mapping(source = &quot;bName&quot;, target = &quot;bbbName&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    AgrSceneGroupTempRel <span class="title function_">toEntity</span><span class="params">(AgrSceneGroupTempRelDTO trainingDto)</span>;</span><br><span class="line"></span><br><span class="line">    AgrSceneGroupTempRelDTO <span class="title function_">toDto</span><span class="params">(AgrSceneGroupTempRel training)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;AgrSceneGroupTempRelDTO&gt; <span class="title function_">listEntityToDto</span><span class="params">(List&lt;AgrSceneGroupTempRel&gt; training)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-clean，然后-compile"><a href="#2-3-clean，然后-compile" class="headerlink" title="2.3 clean，然后 compile"></a>2.3 clean，然后 compile</h2><p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Fi_gn6GCYIva3UgPePQ1FS4byndW.png"></p>
<ul>
<li>实现类已生成</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FsiIe-PvihcBiwb6tqn-5XBBEEY9.png"></p>
<h1 id="3-注解"><a href="#3-注解" class="headerlink" title="3 注解"></a>3 注解</h1><ul>
<li>@Mapper<ul>
<li>componentModel<ul>
<li>default：默认，可以通过 Mappers.getMapper(Class) 方式获取实例对象</li>
<li>spring：在接口的实现类上自动添加注解 @Component，可通过 @Autowired 方式注入</li>
</ul>
</li>
</ul>
</li>
<li>@Mapping 属性映射，若源对象属性与目标对象名字一致，会自动映射对应属性<ul>
<li>source：源属性</li>
<li>target：目标属性</li>
<li>dateFormat：String 到 Date 日期之间相互转换</li>
<li>ignore: 转换时忽略这个字段</li>
</ul>
</li>
<li>@Mappings：配置多个@Mapping</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/03/yuque/Log/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/03/yuque/Log/" class="post-title-link" itemprop="url">Log</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-03 01:00:20" itemprop="dateCreated datePublished" datetime="2020-09-03T01:00:20+08:00">2020-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:33" itemprop="dateModified" datetime="2023-02-07T21:32:33+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/Fj5tagGSzGFScHm7h8xRYQ582ixJ.jpeg"></p>
<h1 id="1-日志门面"><a href="#1-日志门面" class="headerlink" title="1 日志门面"></a>1 日志门面</h1><h2 id="1-1-Commons-Logging"><a href="#1-1-Commons-Logging" class="headerlink" title="1.1 Commons Logging"></a>1.1 Commons Logging</h2><p>Commons Logging 是通过动态查找机制，在程序运行时，使用自己的 ClassLoader 寻找和载入本地具体的实现。详细策略可以查看 commons-logging-*.jar 包中的 org.apache.commons.logging.impl.LogFactoryImpl.java 文件。由于 Osgi 不同的插件使用独立的 ClassLoader，Osgi 的这种机制保证了插件互相独立, 其机制限制了 Commons Logging 在 Osgi 中的正常使用。</p>
<h2 id="1-2-Slf4j"><a href="#1-2-Slf4j" class="headerlink" title="1.2 Slf4j"></a>1.2 Slf4j</h2><p>Slf4j 在编译期间，静态绑定本地的 Log 库，因此可以在 Osgi 中正常使用。它是通过查找类路径下 org.slf4j.impl.StaticLoggerBinder，然后在 StaticLoggerBinder 中进行绑定。</p>
<hr>
<h1 id="2-日志实现"><a href="#2-日志实现" class="headerlink" title="2 日志实现"></a>2 日志实现</h1><h2 id="2-1-Logback"><a href="#2-1-Logback" class="headerlink" title="2.1 Logback"></a>2.1 Logback</h2><h2 id="2-2-Log4j"><a href="#2-2-Log4j" class="headerlink" title="2.2 Log4j"></a>2.2 Log4j</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/02/yuque/HTTP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/02/yuque/HTTP/" class="post-title-link" itemprop="url">HTTP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-02 23:08:34" itemprop="dateCreated datePublished" datetime="2020-09-02T23:08:34+08:00">2020-09-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-07 21:32:48" itemprop="dateModified" datetime="2023-02-07T21:32:48+08:00">2023-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h1><p><strong>以下部分内容摘自《图解 HTTP》</strong></p>
<ul>
<li><p><strong>无状态协议</strong></p>
<blockquote>
<p>HTTP 协议自身不对请求和响应之间的通信状态进行保存。也就是说 HTTP 这个级别，协议对于发送过的请求和响应都不做持久化的处理。</p>
</blockquote>
<ul>
<li>设计简单，为了更快的处理大量的事务，确保协议的可伸缩性</li>
<li>HTTP + Cookie 就可以管理状态了</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p><strong>持久连接</strong></p>
<blockquote>
<p>持久连接也被称为 HTTP keep alive 或者 HTTP connection reuse。它的特点是，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。</p>
</blockquote>
<ul>
<li><p>好处</p>
<ul>
<li>减少了 TCP 连接重复建立和断开的时间开销</li>
<li>减轻了服务端的负载</li>
</ul>
</li>
<li><p><strong>HTTP 初始版本：</strong></p>
</li>
</ul>
</li>
</ul>
<p>**<br><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FgNGqwwDzAa16gEWUFAsnZDeivZY.webp"></p>
<ul>
<li><strong>HTTP1.1 后默认持久连接：</strong></li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FhmMpE_lm644NSa5wMuRrWuY2zzE.webp"></p>
<hr>
<ul>
<li>管线化<blockquote>
<p>同时<strong>并行</strong>发送多个请求。之前需要发送请求之后必须等待并且接收到回应之后，才能发送下一个请求。管线化技术出现之后，就不用等待就可以发送下一个请求了。</p>
</blockquote>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/heheii/blog-imag/blog-images/FhB7Z09Xacz__aoppbDsugTqkkUL.webp"></p>
<h1 id="2-HTTP-请求方法"><a href="#2-HTTP-请求方法" class="headerlink" title="2 HTTP 请求方法"></a>2 HTTP 请求方法</h1><h2 id="2-1-GET"><a href="#2-1-GET" class="headerlink" title="2.1 GET"></a>2.1 GET</h2><ul>
<li>一般用来获取数据</li>
<li>HTTP 协议规范没有对 URL 长度进行限制，但是特定的<strong>浏览器</strong>及<strong>服务器</strong>会对长度进行限制，如果是服务端调用服务端接口，则长度只受服务器影响<ul>
<li>IE    2083 个字符</li>
<li>Firefox    65,536 个字符</li>
<li>Safari    80,000 个字符</li>
<li>Opera    190,000 个字符</li>
<li>Google chrome    8182 个字符</li>
<li>Apache Server    8,192 个字符</li>
<li>IIS 微软 web server    16,384 个字符</li>
</ul>
</li>
</ul>
<h2 id="2-2-POST"><a href="#2-2-POST" class="headerlink" title="2.2 POST"></a>2.2 POST</h2><p>一般用来新增数据</p>
<h2 id="2-3-PUT"><a href="#2-3-PUT" class="headerlink" title="2.3 PUT"></a>2.3 PUT</h2><p>一般用来修改数据</p>
<h2 id="2-4-Delete"><a href="#2-4-Delete" class="headerlink" title="2.4 Delete"></a>2.4 Delete</h2><p>一般用来删除数据</p>
<h2 id="2-5-TRACE"><a href="#2-5-TRACE" class="headerlink" title="2.5 TRACE"></a>2.5 TRACE</h2><p>回显服务器收到的请求，主要用于测试或诊断</p>
<h2 id="2-6-OPTIONS"><a href="#2-6-OPTIONS" class="headerlink" title="2.6 OPTIONS"></a>2.6 OPTIONS</h2><p>获取服务器支持的 HTTP 请求方法<br>用来检查服务器的性能</p>
<h2 id="2-7-HEAD"><a href="#2-7-HEAD" class="headerlink" title="2.7 HEAD"></a>2.7 HEAD</h2><p>请求获取由 Request-URI 所标识的资源的响应消息报头</p>
<h2 id="2-8-CONNECT"><a href="#2-8-CONNECT" class="headerlink" title="2.8 CONNECT"></a>2.8 CONNECT</h2><p>This specification reserves the method name CONNECT for use with a proxy that can dynamically switch to being a tunnel</p>
<hr>
<h1 id="3-HTTP-状态码"><a href="#3-HTTP-状态码" class="headerlink" title="3 HTTP 状态码"></a>3 HTTP 状态码</h1><ul>
<li><strong>200</strong> OK<ul>
<li>当您的操作将在响应正文中返回数据时，出现此结果。</li>
</ul>
</li>
<li><strong>204</strong> No Content<ul>
<li>当您的操作成功，但不在响应正文中返回数据时，出现此结果。</li>
</ul>
</li>
<li><strong>304</strong> Not Modified（重定向）<ul>
<li>当测试实体自上次检索以来是否被修改时，出现此结果。</li>
</ul>
</li>
<li><strong>403</strong> Forbidden</li>
<li><strong>401</strong> Unauthorized<ul>
<li>客户端试图未经授权访问受保护的资源</li>
</ul>
</li>
<li><strong>413</strong> Payload Too Large<ul>
<li>当请求长度过长时，出现此结果。</li>
</ul>
</li>
<li><strong>400</strong> BadRequest<ul>
<li>当参数无效时，出现此结果。</li>
</ul>
</li>
<li><strong>404</strong> Not Found<ul>
<li>无法找到指定位置的资源</li>
</ul>
</li>
<li><strong>405</strong> Method Not Allowed<ul>
<li>请求方法（GET、POST、HEAD、Delete、PUT、TRACE 等）对指定的资源不适用。</li>
</ul>
</li>
<li><strong>406</strong> Not Acceptable<ul>
<li>指定的资源已经找到，但它的 MIME 类型和客户在 Accpet 头中所指定的不兼容</li>
</ul>
</li>
<li><strong>412</strong> Precondition Failed</li>
<li><strong>500</strong> Internal Server Error<ul>
<li>服务器内部错误</li>
</ul>
</li>
<li><strong>501</strong> Not Implemented<ul>
<li>当未实施某个请求的操作时，出现此结果。</li>
</ul>
</li>
<li><strong>502</strong> Bad Gateway</li>
<li><strong>503</strong> Service Unavailable<ul>
<li>当 Web API 服务不可用时，出现此结果。</li>
</ul>
</li>
<li><strong>504</strong> Gateway Timeout<ul>
<li>由代理或网关服务使用，表示不能及时地从远程服务器获得应答</li>
</ul>
</li>
</ul>
<h1 id="4-HTTP-head-中常用字段"><a href="#4-HTTP-head-中常用字段" class="headerlink" title="4 HTTP head 中常用字段"></a>4 HTTP head 中常用字段</h1><h2 id="4-1-request"><a href="#4-1-request" class="headerlink" title="4.1 request"></a>4.1 request</h2><ul>
<li>Accept：用于高速服务器，客户机支持的数据类型</li>
<li>Accept-Charset：用于告诉服务器，客户机采用的编码格式</li>
<li>Accept-Encoding：用于告诉服务器，客户机支持的数据压缩格式</li>
<li>Accept-Language：客户机的语言环境</li>
<li>Host：客户机通过这个头高速服务器，想访问的主机名</li>
<li>If-Modified-Since：客户机通过这个头告诉服务器，资源的缓存时间</li>
<li>Referer：客户机通过这个头告诉服务器，它是从哪个资源来访问服务器的（防盗链）</li>
<li><strong>Content-Type</strong>：指定 body 中的数据类型</li>
<li>Content-Length：指定发送数据的长度</li>
<li>User-Agent：客户机通过这个头告诉服务器，客户机的软件环境</li>
<li>Cookie：客户机通过这个头可以向服务器带数据</li>
<li>Connection：处理完这次请求后是否断开连接还是继续保持连接</li>
<li>Date：当前时间值</li>
</ul>
<h2 id="4-2-response"><a href="#4-2-response" class="headerlink" title="4.2 response"></a>4.2 response</h2><ul>
<li>Location：这个头配合 302 状态码使用，用于告诉客户找谁。</li>
<li>Server：服务器通过这个头告诉浏览器服务器的类型。</li>
<li>Content-Encoding：服务器通过这个头告诉浏览器数据的压缩格式。</li>
<li>Content-Length：服务器通过这个头告诉浏览器回送数据的长度</li>
<li><strong>Content-Type</strong>：服务器通过这个头告诉浏览器回送数据的类型</li>
<li>Last-Modified：告诉浏览器当前资源的最后缓存时间</li>
<li>Refresh：告诉浏览器隔多久刷新一次</li>
<li>Content-Disposition：告诉浏览器以下载方式打开数据</li>
<li>Transfer-Encoding：告诉浏览器数据的传送格式</li>
<li>ETag：缓存相关的头</li>
<li>Expires：告诉浏览器把回送的资源缓存多长时间 -1 或 0 则是不缓存</li>
<li>Cache-Control：no-cache ，控制浏览器不要缓存数据</li>
<li>Pragma：no-cache， 控制浏览器不要缓存数据</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">114</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
